"use strict";(self.webpackChunkgum_test=self.webpackChunkgum_test||[]).push([[678],{957:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var r=n(294),i=(n.p,n.p+"static/img10-f-651f5d532c0dcd9c7764a17e17895bcd.png"),c=480,o=640/c,l=function(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useState)(!1),l=n[0],a=n[1],u=(0,r.useCallback)((function(){e.current.pause();var n=window.getComputedStyle(e.current),r=parseFloat(n.width),i=parseFloat(n.height),a=e.current,u=a.videoWidth,s=a.videoHeight,d=i/r,f=d>o?[r,r*o]:[i/o,i],h=s/u>d?u/r:s/i,m=f[0]*h,p=f[1]*h,v=(u-m)/2,g=(s-p)/2,b=t.current.getContext("2d");l&&(b.translate(c,0),b.scale(-1,1)),b.drawImage(e.current,v,g,m,p,0,0,c,640),t.current.toBlob((function(t){console.log("takePhoto blob",t),e.current.play()}))}),[l]),s=(0,r.useCallback)((function(){var t,n;null===(t=e.current.srcObject)||void 0===t||null===(n=t.getTracks())||void 0===n||n.forEach((function(e){return e.stop()})),a(!l)}),[l]);return(0,r.useEffect)((function(){var e=function(e){return e.preventDefault()},t=["mousewheel","touchmove"];return t.forEach((function(t){return document.addEventListener(t,e,{passive:!1})})),function(){t.forEach((function(t){return document.removeEventListener(t,e)}))}}),[]),(0,r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{facingMode:l?"user":"environment"},audio:!1}).then((function(t){e.current.srcObject=t,e.current.play()})).catch((function(e){console.error(e)}))}),[l]),r.createElement("div",null,r.createElement("video",{ref:function(t){return e.current=t},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",objectFit:"cover",transform:l&&"scaleX(-1)"},playsInline:!0,muted:!0}),r.createElement("canvas",{ref:function(e){return t.current=e},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",objectFit:"contain"},width:c,height:640}),r.createElement("img",{src:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",objectFit:"contain"},alt:"Frame image"}),r.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"space-between"}},r.createElement("div",{style:{height:80,display:"flex",justifyContent:"flex-end",alignItems:"center",padding:20}},r.createElement("button",{onClick:s},"SWITCH FACING")),r.createElement("div",{style:{height:120,display:"flex",alignItems:"center",padding:20}},r.createElement("div",{style:{flex:1}}),r.createElement("div",null,r.createElement("button",{onClick:u},"SHOOT")),r.createElement("div",{style:{flex:1}}))))}}}]);
//# sourceMappingURL=component---src-pages-index-js-77d8f6d1c0f946b382ee.js.map