{"version":3,"file":"component---src-pages-index-js-09df2b79145dc5809507.js","mappings":"iKAAA,EAAe,IAA0B,mDCKnCA,EAAe,IACfC,EAAc,IAuFpB,EArFkB,WAChB,IAAMC,GAAQC,EAAAA,EAAAA,UACRC,GAASD,EAAAA,EAAAA,UAEf,GAAwBE,EAAAA,EAAAA,YAAjBC,EAAP,KAAaC,EAAb,KA4BA,OA1BAC,EAAAA,EAAAA,YAAU,WACRC,UAAUC,aAAaC,aAAa,CAClCT,OAAO,EACPU,OAAO,IAENC,MAAK,SAAAC,GACJZ,EAAMa,QAAQC,UAAYF,EAE1BG,YAAW,WACT,IAAMC,EAAUd,EAAOW,QAAQI,WAAW,MAE1CD,EAAQE,UAAY,QACpBF,EAAQG,SAAS,EAAG,EAAGrB,EAAcC,GAErCiB,EAAQI,UAAUpB,EAAMa,QAAS,EAAG,EAAGf,EAAcC,GAErDG,EAAOW,QAAQQ,QAAO,SAAAC,GACpBjB,EAAQkB,OAAOC,IAAIC,gBAAgBH,SAEpC,QAEJI,OAAM,SAAAC,GACLC,QAAQC,MAAMF,QAEjB,IAGD,uBAAKG,MAAO,CACVC,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,gBAAiB,QACjBC,QAAS,OACTC,cAAe,SACfC,eAAgB,eAEhB,2BACE,yBACEC,IAAK,SAAAA,GAAG,OAAIxC,EAAMa,QAAU2B,GAC5BV,MAAO,CACLW,MAAO,OACPC,OAAQ,OACRL,QAAS,SAEXM,UAAQ,EACRC,aAAW,EACXC,OAAK,EACLC,OAAQC,EACRN,MAAO1C,EACP2C,OAAQ5C,IAEV,0BACE0C,IAAK,SAAAA,GAAG,OAAItC,EAAOW,QAAU2B,GAC7BV,MAAO,CACLC,SAAU,WACVU,MAAO,OACPC,OAAQ,OACRV,IAAK,EACLC,KAAM,GAERQ,MAAO1C,EACP2C,OAAQ5C,KAGZ,uBAAKgC,MAAO,CACVkB,KAAM,EACNX,QAAS,OACTE,eAAgB,SAChBU,WAAY,SACZb,gBAAiB,SAEjB,qBAAGhC,KAAMA,EAAM8C,SAAS,gBAAxB","sources":["webpack://gum-test/./src/images/test.png","webpack://gum-test/./src/pages/index.js"],"sourcesContent":["export default __webpack_public_path__ + \"static/test-f8a27158c0bc147a46bd66e7f35c1a3a.png\";","import React, { useEffect, useRef, useState } from \"react\"\n\nimport './styles.scss'\nimport testImage from '../images/test.png'\n\nconst IMAGE_HEIGHT = 640\nconst IMAGE_WIDTH = 480\n\nconst IndexPage = () => {\n  const video = useRef()\n  const canvas = useRef()\n\n  const [href, setHref] = useState()\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: false\n    })\n      .then(stream => {\n        video.current.srcObject = stream\n\n        setTimeout(() => {\n          const context = canvas.current.getContext('2d')\n\n          context.fillStyle = 'black'\n          context.fillRect(0, 0, IMAGE_HEIGHT, IMAGE_WIDTH)\n\n          context.drawImage(video.current, 0, 0, IMAGE_HEIGHT, IMAGE_WIDTH)\n\n          canvas.current.toBlob(blob => {\n            setHref(window.URL.createObjectURL(blob))\n          })\n        }, 3000)\n      })\n      .catch(err => {\n        console.error(err)\n      })\n  }, [])\n\n  return (\n    <div style={{\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'black',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start'\n    }}>\n      <div>\n        <video\n          ref={ref => video.current = ref}\n          style={{\n            width: '100%',\n            height: '100%',\n            display: 'block'\n          }}\n          autoPlay\n          playsInline\n          muted\n          poster={testImage}\n          width={IMAGE_WIDTH}\n          height={IMAGE_HEIGHT}\n        />\n        <canvas\n          ref={ref => canvas.current = ref}\n          style={{\n            position: 'absolute',\n            width: '100%',\n            height: '100%',\n            top: 0,\n            left: 0\n          }}\n          width={IMAGE_WIDTH}\n          height={IMAGE_HEIGHT}\n        />\n      </div>\n      <div style={{\n        flex: 1,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'blue'\n      }}>\n        <a href={href} download=\"untitled.png\">ダウンロード</a>\n      </div>\n    </div>\n  )\n}\n\nexport default IndexPage\n"],"names":["IMAGE_HEIGHT","IMAGE_WIDTH","video","useRef","canvas","useState","href","setHref","useEffect","navigator","mediaDevices","getUserMedia","audio","then","stream","current","srcObject","setTimeout","context","getContext","fillStyle","fillRect","drawImage","toBlob","blob","window","URL","createObjectURL","catch","err","console","error","style","position","top","left","right","bottom","backgroundColor","display","flexDirection","justifyContent","ref","width","height","autoPlay","playsInline","muted","poster","testImage","flex","alignItems","download"],"sourceRoot":""}