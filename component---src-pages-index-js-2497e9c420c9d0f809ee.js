"use strict";(self.webpackChunkgum_test=self.webpackChunkgum_test||[]).push([[678],{957:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var i=n(294),o=(n.p,n.p+"static/img10-f-651f5d532c0dcd9c7764a17e17895bcd.png"),r=480,c=640/r,a=function(){var e=(0,i.useRef)(),t=(0,i.useRef)(),n=(0,i.useState)(!1),a=n[0],l=n[1],u=(0,i.useCallback)((function(){e.current.pause();var n=window.getComputedStyle(e.current),i=parseFloat(n.width),o=parseFloat(n.height),l=e.current,u=l.videoWidth,s=l.videoHeight,d=o/i,f=d>c?[i,i*c]:[o/c,o],m=s/u>d?u/i:s/o,h=f[0]*m,v=f[1]*m,p=(u-h)/2,g=(s-v)/2,b=t.current.getContext("2d");a&&(b.translate(r,0),b.scale(-1,1)),b.drawImage(e.current,p,g,h,v,0,0,r,640),t.current.toBlob((function(t){console.log("takePhoto blob",t),e.current.play()}))}),[a]),s=(0,i.useCallback)((function(){var t,n;null===(t=e.current.srcObject)||void 0===t||null===(n=t.getTracks())||void 0===n||n.forEach((function(e){return e.stop()})),l(!a)}),[a]);return(0,i.useEffect)((function(){var e=function(e){return e.preventDefault()},t=["mousewheel","touchmove"];return t.forEach((function(t){return document.addEventListener(t,e,{passive:!1})})),function(){t.forEach((function(t){return document.removeEventListener(t,e)}))}}),[]),(0,i.useEffect)((function(){navigator.mediaDevices.enumerateDevices().then((function(e){return console.log("*** devices",e)})),navigator.mediaDevices.getUserMedia({video:{facingMode:a?"user":"environment"},audio:!1}).then((function(t){e.current.srcObject=t})).catch((function(e){console.error(e)}))}),[a]),i.createElement("div",null,i.createElement("video",{ref:function(t){return e.current=t},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",objectFit:"cover",transform:a&&"scaleX(-1)"},autoPlay:!0,playsInline:!0,muted:!0}),i.createElement("canvas",{ref:function(e){return t.current=e},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",objectFit:"contain"},width:r,height:640}),i.createElement("img",{src:o,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block",objectFit:"contain"},alt:"Frame image"}),i.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"space-between"}},i.createElement("div",{style:{height:80,display:"flex",justifyContent:"flex-end",alignItems:"center",padding:20}},i.createElement("button",{onClick:s},"SWITCH FACING")),i.createElement("div",{style:{height:120,display:"flex",alignItems:"center",padding:20}},i.createElement("div",{style:{flex:1}}),i.createElement("div",null,i.createElement("button",{onClick:u},"SHOOT")),i.createElement("div",{style:{flex:1}}))))}}}]);
//# sourceMappingURL=component---src-pages-index-js-2497e9c420c9d0f809ee.js.map